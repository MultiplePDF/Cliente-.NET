@{
    ViewData["Title"] = "My Files";
    Layout="_MainPageLayout";
}
@model BatchListModel;

<div class="table-responsive">
    <table class="table table-hover text-center">
        <thead class="header-border">
            <tr>
                <th class="align-middle txtHead">Transacción</th>
                <th class="align-middle txtHead">Fecha Creación</th>
                <th class="align-middle txtHead">#Archivos</th>
                <th class="align-middle txtHead">Vigencia (Días)</th>
                <th class="align-middle txtHead">Link</th>
            </tr>
        </thead>
        <tbody>
            @{
                int counter = 0;
            }
            @foreach (var obj in Model.objectList)
            {
                <tr>
                    <td class="nameFiles">@counter</td>
                    <td class="nameFiles">
                        @{
                            var fechaHora = obj.createdAt.ToString().Split(" ");
                            string fecha = fechaHora[0];
                        }
                        @fecha
                    </td>
                    <td>@obj.numberFiles</td>
                    <td>
                        @{
                            DateTime validityDate = obj.validity;
                            TimeSpan timeDifference = validityDate - DateTime.Now;
                            double remainingTime = timeDifference.TotalHours;
                            string remainingTimeDays = (timeDifference.TotalHours/24).ToString("0");
                            @* double validityHours = double.Parse(obj.status);
                            double hoursRemaining = validityHours - remainingTime; *@
                        }
                        @remainingTimeDays
                        @* @hoursRemaining.ToString("0.0") horas *@
                    </td>
                    <td>
                        <a class="link-my-files" href="@obj.batchPath" >
                            <button type="button" class="btn-download rounded-4" 
                            title="Descargar todo">
                                <i class="fa-solid fa-download"></i>
                            </button>
                        </a>
                        <a class="link-my-files" href='@Url.Action("Details", "MainPage", new { index = counter })' >
                            <button type="button" class="btn-folder rounded-4" 
                            title="Ver todos los archivos" data-index="@counter">
                                <i class="fa-solid fa-folder-open"></i>
                            </button>
                        </a>
                    </td>
                </tr>
                counter++;
            }
        </tbody>
    </table>
</div>